# ARCOR2

**ARCOR** stands for **A**ugmented **R**eality **C**ollaborative **R**obot. It is a system for simplified programming of collaborative robots based on augmented reality developed by [Robo@FIT](https://www.fit.vut.cz/research/group/robo/.en). 

This repository contains the backend solution. It can be easily tested out or deployed using [docker images](https://hub.docker.com/u/arcor2). Unity-based client application for ARCore-supported tablets is available [here](https://github.com/robofit/arcor2_editor).

Development is supported by [Test-it-off: Robotic offline product testing](https://www.fit.vut.cz/research/project/1308/) project (Ministry of Industry and Trade of the Czech Republic).

Quick Links:
 - [Terminology](#terminology)
 - [Services](#services)
 - [Development](#development)
 - [Releases](#releases)
 - [Publications](#publications)

## Terminology

 - Scene
   - The layout of the workspace.
   - Consists of action objects' instances and their parameters.
 - Project
   - User-defined program based on a scene.
   - Contains action points, actions, and their parameters, program flow definition (logic).
 - Action Point
   - Acts as a spatial anchor.
   - Defined within a project.
   - Has a 3D position, may contain ```0-n``` orientations and/or robot joints. 
 - Action Object
   - A class derived from [Generic](src/python/arcor2/object_types/abstract.py).
   - Its methods (with special annotation) become Actions.
   - Support for new service/device/robot is added through writing a class definition.
   - It may or may not have pose, collision model, URDF model (robots only).
 - Action Object Instance
   - An action object with given parameters, pose, etc. within a scene, project, or main script.
 - Action
   - Action object method that can be parametrized and called from a project.
 - Action Instance
   - Concrete action with a unique ID and name added to a specific action point in the project.
 - Execution Package
   - Self-contained package generated from scene, project, and involved action objects.
 - Main Script
   - Part of the execution package.
   - An executable script that creates instances of the objects and contains the logic of the project.
   - Can be optionally hand-written.
   - Logic can be manually updated and then the script could be converted back to the project (upcoming feature).

## Services

 - [ARServer](src/python/arcor2_arserver/README.md)
   - The central point for user interfaces (e.g. instances of the AREditor).
   - Provides API (RPC, events) for its clients, mediates communication with other services.
 - [Build](src/python/arcor2_build/README.md)
   - Transforms projects created in the AR environment into execution packages.
 - [Execution](src/python/arcor2_execution/README.md)
   - Runs execution packages generated by the Build service.
   - Provides data about packages and execution state (what step of the program with what parameters is currently running) to the ARServer / AREditor, controls the execution of the main script (pause, resume, stop).

Other services as Project and Scene (this repo provides [mocks](src/python/arcor2_mocks) for them) are being developed by [Kinali](https://www.kinali.cz/en/) and will be eventually published [here](https://gitlab.com/kinalisoft/test-it-off).
 
## Development

We use [Pants](https://www.pantsbuild.org/docs) to build the sources into Python distribution packages, run tests, etc. Packages do not contain ```setup.py``` file - this is generated during the build process. 

### Testing

How to run all tests:
```bash
$ ./pants test ::
```

How to run a specific test:
```bash
$ ./pants test src/python/arcor2/data/tests
```


## Releases

### arcor2

[README](src/python/arcor2/README.md) | [CHANGELOG](src/python/arcor2/CHANGELOG.md)

 - 2020-09-24: [0.8.0](link_to_tag) ([docker](), [pypi]()).
 
### arcor2_arserver

[README](src/python/arcor2_arserver/README.md) | [CHANGELOG](src/python/arcor2_arserver/CHANGELOG.md)

 - 2020-09-24: [0.8.0](link_to_tag) ([docker](), [pypi]()).

 
### arcor2_arserver_data

[README](src/python/arcor2_arserver_data/README.md) | [CHANGELOG](src/python/arcor2_arserver_data/CHANGELOG.md)

 - 2020-09-24: [0.8.0](link_to_tag) ([docker](), [pypi]()).


### arcor2_build

[README](src/python/arcor2_build/README.md) | [CHANGELOG](src/python/arcor2_build/CHANGELOG.md)

 - 2020-09-24: [0.8.0](link_to_tag) ([docker](), [pypi]()).

### arcor2_build_data

[README](src/python/arcor2_build_data/README.md) | [CHANGELOG](src/python/arcor2_build_data/CHANGELOG.md)

 - 2020-09-24: [0.8.0](link_to_tag) ([docker](), [pypi]()).

### arcor2_calibration

[README](src/python/arcor2_calibration/README.md) | [CHANGELOG](src/python/arcor2_calibration/CHANGELOG.md)
### arcor2_calibration_data

[README](src/python/arcor2_calibration_data/README.md) | [CHANGELOG](src/python/arcor2_calibration_data/CHANGELOG.md)

### arcor2_execution

[README](src/python/arcor2_execution/README.md) | [CHANGELOG](src/python/arcor2_execution/CHANGELOG.md)

 - 2020-09-24: [0.8.0](link_to_tag) ([docker](), [pypi]()).
 
### arcor2_execution_data

[README](src/python/arcor2_execution_data/README.md) | [CHANGELOG](src/python/arcor2_execution_data/CHANGELOG.md)

 - 2020-09-24: [0.8.0](link_to_tag) ([docker](), [pypi]()).
 
### arcor2_execution_rest_proxy

[README](src/python/arcor2_execution_rest_proxy/README.md) | [CHANGELOG](src/python/arcor2_execution_rest_proxy/CHANGELOG.md)

 - 2020-09-24: [0.8.0](link_to_tag) ([docker](), [pypi]()).
 
### arcor2_fit_demo

[README](src/python/arcor2_fit_demo/README.md) | [CHANGELOG](src/python/arcor2_fit_demo/CHANGELOG.md)

- 2020-09-24: [0.2.0](link_to_tag) ([docker](), [pypi]()).

### arcor2_kinali

[README](src/python/arcor2_kinali/README.md) | [CHANGELOG](src/python/arcor2_kinali/CHANGELOG.md)

 - 2020-09-24: [0.8.0](link_to_tag) ([docker](), [pypi]()).
 
 ### arcor2_mocks

[README](src/python/arcor2_mocks/README.md) | [CHANGELOG](src/python/arcor2_mocks/CHANGELOG.md)

 - 2020-09-23: [0.8.0](link_to_tag) ([docker](), [pypi]()).
 
 ## Publications
 
 Comming soon!